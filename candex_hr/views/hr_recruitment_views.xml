<?xml version="1.0"?>
<odoo>
    <data>
    <!-- Applicants -->
<!--     <record model="ir.ui.view" id="candex_hr_applicant_survey_view_form">-->
<!--        <field name="name">Applicants</field>-->
<!--        <field name="model">hr.applicant</field>-->
<!--        <field name="inherit_id" ref="hr_recruitment_survey.hr_applicant_view_form_inherit"/>-->
<!--        <field name="arch" type="xml">-->
<!--            <xpath expr="//button" position="replace"/>-->
<!--        </field>-->
<!--     </record>-->

    <record model="ir.ui.view" id="candex_hr_applicant_view_form">
        <field name="name">Applicants</field>
        <field name="model">hr.applicant</field>
        <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
        <field name="arch" type="xml">
            <!-- Replace stage_id -->
            <xpath expr="//header" position="replace" >
                <header>
                    <button name="action_move_new_stage" string="Next Step" type="object" class="btn-primary"/>
                    <field name="stage_id" widget="statusbar" options="{'fold_field': 'fold'}"
                            attrs="{'invisible': [('active', '=', False),('emp_id', '=', False)]}"
                            domain="[('id', 'in', job_stage_ids)]" />
                </header>
            </xpath>

            <!-- Hide some fields -->
            <xpath expr="//div[hasclass('oe_chatter')]" position="replace" />
            <xpath expr="//field[@name='kanban_state']" position="replace" />
            <xpath expr="//div[hasclass('oe_title')]" position="replace" >
                <h2 class="o_row">
                    <div>
                        <label for="partner_name" class="oe_edit_only"/>
                        <field name="partner_name"/>
                    </div>
                </h2>
            </xpath>

            <!--  Replace some fields by candidate's information  -->
            <xpath expr="//form/sheet/group/group" position="replace">
                <group>
                    <field name="title_name" placeholder="Name Title" default_focus="1"/>
                    <field name="first_name"  placeholder="First Name" required="1" />
                    <field name="last_name"  placeholder="Last and Middle Name" required="1" />
                    <field name="gender"  />
                    <field name="birthday"  />
                    <field name="status" />
                    <field name="partner_id"  readonly="1" />
                    <field name="email_from"  widget="email" />
                    <field name="work_email"  widget="email" />
                    <field name="partner_phone" widget="phone" />
                    <field name="lang" />
                </group>
            </xpath>

            <!--  Add some fields -->
            <xpath expr="//field[@name='categ_ids']" position="before">
                <field name="job_title" />
                <field name="function" />
                <field name="industry" />
                <field name="seniority" />
            </xpath>
            <xpath expr="//sheet" position="inside">
                <notebook colspan="4" style="margin-top:50px">
                    <page string="Activities">
                        <field name="applicant_activity_ids" domain="[('type','=', 'survey')]">
                            <tree>
                                <field name="survey_id" />
                                <field name="result_id" />
                                <field name="create_date" />
                                <field name="link" />
                                <field name="note" />
                                <field name="stage_id" />
                            </tree>
                        </field>
                    </page>
                    <page string="History" >
                        <field name="history_ids">
                            <tree>
                                <field name="author_id" string="By User"/>
                                <field name="create_date" />
                                <field name="body" string="Content"/>
                                <field name="message_type" />
                                <field name="res_id" string="Ref ID"/>
                                <field name="attachment_ids" widget="many2many_binary" readonly="1"/>
                            </tree>
                        </field>
                    </page>
                </notebook>
            </xpath>

            <!-- Add fields into Job Tab-->
            <xpath expr="//field[@name='job_id']" position="after">
                <field name="user_ids" widget="many2many_tags" domain="[('share', '=', False)]" />
                <field name="next_meeting_date" />
                <field name="is_confirm_meeting" readonly="1"/>
                <field name="job_stage_ids" widget="many2many_tags" invisible="1"/>
                <field name="token" readonly="0"/>
                <field name="url_confirm_yes" invisible="1"/>
                <field name="url_confirm_no" invisible="1"/>
            </xpath>
        </field>
    </record>


    <!--  Hr Reject Reasons   -->
    <record id="view_reject_reason" model="ir.ui.view">
        <field name="name">Hr Recruitment Reject Reasons Form View</field>
        <field name="model">reject.reason</field>
        <field name="arch" type="xml">
            <form string="Reject Reasons">
                <sheet>
                    <group>
                        <field name="name" />
                    </group>
                </sheet>
            </form>
        </field>
    </record>

     <record id="view_reject_reason_tree" model="ir.ui.view">
        <field name="name">Hr Recruitment Reject Reasons Tree View</field>
        <field name="model">reject.reason</field>
        <field name="arch" type="xml">
            <tree string="Reject Reasons">
                <field name="name" />
            </tree>
        </field>
    </record>

     <record id="action_reject_reason" model="ir.actions.act_window">
            <field name="name">Hr Recruitment Reject Reasons</field>
            <field name="res_model">reject.reason</field>
            <field name="view_mode">form, tree</field>
            <field name="view_id" ref="view_reject_reason"/>
     </record>

    <!--  Hr State Action      -->
    <record id="view_hr_state_action" model="ir.ui.view">
        <field name="name">Hr State Action Form</field>
        <field name="model">hr.state.action</field>
        <field name="arch" type="xml">
            <form string="Hr State Action Form">
                <sheet>
                    <group>
                        <field name="hr_recruitment_stage_id" string="State"/>
                        <field name="user_ids" string="Hiring Managers" widget="many2many_tags" domain="[('share', '=', False)]"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_hr_state_action_tree" model="ir.ui.view">
        <field name="name">Hr State Action Tree View</field>
        <field name="model">hr.state.action</field>
        <field name="arch" type="xml">
            <tree string="Hr State Action Form">
                <field name="sequence" widget="handle"/>
                <field name="hr_recruitment_stage_id" string="State"/>
                <field name="user_ids" string="Hiring Managers" />
            </tree>
        </field>
    </record>

    <record id="action_hr_state_action" model="ir.actions.act_window">
            <field name="name">Hr State Action Form</field>
            <field name="res_model">hr.state.action</field>
            <field name="view_mode">form,tree</field>
            <field name="view_id" ref="view_hr_state_action"/>
     </record>

    <!-- Job Position Form View-->
    <record model="ir.ui.view" id="candex_hr_job_survey_form_view">
        <field name="name">Job Positions</field>
        <field name="model">hr.job</field>
        <field name="inherit_id" ref="hr_recruitment.hr_job_survey"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet" position="inside">
                <group>
                    <field name="survey_id" string="Survey"/>
                    <field name="reject_reason_ids" widget="section_and_note_one2many">
                        <form>
                            <field name="name" />
                        </form>
                        <tree editable="bottom">
                            <field name="name" />
                        </tree>
                    </field>
                    <field name="hr_stage_action_ids" widget="section_and_note_one2many">
                        <form>
                            <group>
                                <field name="sequence" widget="handle"/>
                                <field name="hr_recruitment_stage_id" string="State"/>
                                <field name="user_ids" string="Hiring Managers" widget="many2many_tags" domain="[('share', '=', False)]"/>
                            </group>
                        </form>
                        <tree editable="bottom">
                            <field name="sequence" widget="handle"/>
                            <field name="hr_recruitment_stage_id" />
                            <field name="user_ids" string="Hiring Managers" widget="many2many_tags"/>
                        </tree>
                    </field>
                </group>
            </xpath>
        </field>
    </record>

    <!-- Job Position Form View-->
    <record model="ir.ui.view" id="candex_hr_recruitment_stage_form_view">
        <field name="name">Stages</field>
        <field name="model">hr.recruitment.stage</field>
        <field name="inherit_id" ref="hr_recruitment.hr_recruitment_stage_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='job_ids']" position="after">
                <field name="reminder_days" />
                <field name="need_to_do_survey" />
                <field name="is_interview" />
                <field name="is_reject" />
            </xpath>
        </field>
    </record>
    </data>
</odoo>
