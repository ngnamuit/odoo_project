<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--   ACTION     -->
        <record id="res_project_daily_work" model="ir.actions.act_window">
                <field name="name">Daily Work</field>
                <field name="res_model">project.project</field>
                <field name="view_mode">kanban,form</field>
                <field name="view_id" ref="project.view_project_kanban"/>
                <field name="search_view_id" ref="project.view_project_project_filter"/>
                <field name="target">main</field>
                <field name="context">{'is_daily_work': True}</field>
                <field name="domain">[('project_type', '=', 'daily_work')]</field>
                <field name="help" type="html">
                    <p class="o_view_nocontent_smiling_face">
                        No projects found. Let's create one!
                    </p><p>
                        Projects regroup tasks on the same topic and each have their own dashboard.
                    </p>
                </field>
        </record>

        <record id="action_view_all_daily_task" model="ir.actions.act_window">
            <field name="name">Tasks</field>
            <field name="res_model">project.task</field>
            <field name="view_mode">tree,kanban,form,calendar,pivot,graph,activity</field>
            <field name="context">{'search_default_my_tasks': 1, 'all_task': 0, 'is_daily_work': True}</field>
            <field name="domain">['|', ('is_daily_task', '=', True), ('project_id.project_type', '=', 'daily_work')]</field>
            <field name="search_view_id" ref="project.view_task_search_form"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No tasks found. Let's create one!
                </p><p>
                     To get things done, use activities and status on tasks.<br/>
                    Chat in real time or by email to collaborate efficiently.
                </p>
            </field>
        </record>

        <record id="action_project_daily_task_user_tree" model="ir.actions.act_window">
            <field name="name">Tasks Analysis</field>
            <field name="res_model">report.project.task.user</field>
            <field name="view_mode">graph,pivot</field>
            <field name="search_view_id" ref="project.view_task_project_user_search"/>
            <field name="domain">[('project_id.project_type', '=', 'daily_work')]</field>
            <field name="context">{'group_by_no_leaf':1,'group_by':[]}</field>
            <field name="help">This report allows you to analyse the performance of your projects and users. You can analyse the quantities of tasks, the hours spent compared to the planned hours, the average number of days to open or close a task, etc.</field>
        </record>

        <record id="rating_rating_action_project_daily_work_report" model="ir.actions.act_window">
            <field name="name">Customer Ratings</field>
            <field name="res_model">rating.rating</field>
            <field name="view_mode">kanban,tree,pivot,graph,form</field>
            <field name="domain">[('parent_res_model','=','project.project'), ('consumed', '=', True)]</field>
            <field name="search_view_id" ref="project.rating_rating_view_search_project"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_empty_folder">
                    No customer ratings yet
                </p><p>
                    Let's wait for your customers to manifest themselves.
                </p>
            </field>
            <field name="context">{}</field>
        </record>

        <record id="open_task_type_form_daily_work" model="ir.actions.act_window">
            <field name="name">Stages</field>
            <field name="res_model">project.task.type</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_id" ref="project.task_type_tree"/>
            <field name="context">{'is_daily_work': True}</field>
            <field name="domain">[('is_daily_task', '=', True)]</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new stage in the task pipeline
              </p><p>
                Define the steps that will be used in the project from the
                creation of the task, up to the closing of the task or issue.
                You will use these stages in order to track the progress in
                solving a task or an issue.
              </p>
            </field>
        </record>

        <record id="open_view_project_all_config_daily_work" model="ir.actions.act_window">
            <field name="name">Projects</field>
            <field name="res_model">project.project</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('project.view_project')}),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('project.view_project_kanban')})]"/>
            <field name="search_view_id" ref="project.view_project_project_filter"/>
            <field name="context">{'is_daily_work': True}</field>
            <field name="domain">[('project_type', '=', 'daily_work')]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                   No projects found. Let's create one!
                </p><p>
                    Projects regroup tasks on the same topic and each have their own dashboard.
                </p>
            </field>
        </record>

        <!--    MENU    -->
        <menuitem id="project_menu_daily_work" name="Daily Work" sequence="60" groups="project.group_project_manager,project.group_project_user"/>
        <menuitem action="daily_work.res_project_daily_work" id="menu_daily_work" name="Projects" parent="daily_work.project_menu_daily_work" sequence="1"/>


        <menuitem name="Tasks" id="menu_project_daily_tasks" parent="daily_work.project_menu_daily_work"
            action="daily_work.action_view_all_daily_task" sequence="2" groups="base.group_no_one,project.group_project_user"/>

        <menuitem id="menu_project_daily_work_report" name="Reporting"
            groups="project.group_project_manager"
            parent="daily_work.project_menu_daily_work" sequence="99"/>

        <menuitem id="menu_project_report_daily_task_analysis"
            name="Tasks Analysis"
            action="action_project_daily_task_user_tree"
            parent="menu_project_daily_work_report"
            sequence="10"/>

        <menuitem id="rating_rating_menu_project_daily_work"
            action="rating_rating_action_project_daily_work_report"
            parent="menu_project_daily_work_report"
            groups="project.group_project_rating"
            sequence="40"/>


        <menuitem id="menu_project_config_daily_work" name="Configuration" parent="project_menu_daily_work"
            sequence="100" groups="project.group_project_manager"/>

        <menuitem action="open_task_type_form_daily_work" id="menu_project_config_project_daily_work"
                  name="Stages" parent="menu_project_config_daily_work" sequence="3" groups="base.group_no_one"/>
        <menuitem action="open_view_project_all_config_daily_work" id="menu_projects_config_daily_work"
                  name="Projects" parent="menu_project_config_daily_work" sequence="10"/>

        <menuitem action="project.project_tags_action" id="menu_project_tags_act_daily_work"
                  parent="menu_project_config_daily_work" sequence="20"/>

        <menuitem id="project_menu_config_activity_type_daily_work"
                  action="project.mail_activity_type_action_config_project_types"
                  parent="menu_project_config_daily_work" sequence="30"/>
    </data>
</odoo>
